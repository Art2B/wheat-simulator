let e;var t="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const r=new Uint8Array(16),o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));var n=function(n,a,s){if(t&&!a&&!n)return t();let d=(n=n||{}).random??n.rng?.()??function(){if(!e){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");e=crypto.getRandomValues.bind(crypto)}return e(r)}();if(d.length<16)throw Error("Random bytes length must be >= 16");if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,a){if((s=s||0)<0||s+16>a.length)throw RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`);for(let e=0;e<16;++e)a[s+e]=d[e];return a}return function(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}(d)};window.inventory={wheat:0,parsnip:0,bread:0},window.fields=[];const a={bread:{ingredients:{wheat:2}}},s={set(e,t,r){console.log("Single element changed",{obj:e,prop:t,value:r});let o=document.querySelector(`[data-action="harvest"][data-ressource="${e.ressource}"]`);return e[t]=r,e.ready&&(console.log("Remove the disabled"),o.disabled=!1),!0}},d=new Proxy(window.fields,{set:(e,t,r)=>(console.log("Fields changed",{obj:e,prop:t,value:r}),"plant"===r.type?e[t]=new Proxy(r,s):e[t]=r,e.every(e=>!e.ready)&&document.querySelectorAll('[data-action="harvest"]').forEach(e=>e.disabled=!0),!0)}),i=new Proxy(window.inventory,{set(e,t,r){e[t]=r;let o=document.querySelectorAll(`[data-ressource="${t}"][data-inventory]`);if(o.length>0)o.forEach(e=>{e.innerHTML=`${r} ${t}`});else{let e=document.createElement("li");e.setAttribute("data-ressource",t),e.setAttribute("data-inventory",""),e.innerText=`${r} ${t}`,document.querySelector("#ressource-list")?.appendChild(e)}let n=document.querySelectorAll('[data-action="craft"][data-ressource="bread"]');return e.wheat>=2?n.forEach(e=>{e.disabled=!1}):n.forEach(e=>{e.disabled=!0}),!0}});class l{static plant(e){console.log("Must plant this: ",e);let t=n(),r={id:t,type:"plant",ressource:e,quantity:1,ready:!1,start:(e=>setTimeout(()=>{console.log("ready for harvest",e);let t=d.find(t=>t.id===e);t&&(t.ready=!0)},1e3)).bind(this,t)};d.push(r),r.start()}static harvest(e){console.log("Must harvest this: ",e),d.filter(t=>t.ready&&t.ressource===e).forEach(e=>{d.splice(d.findIndex(t=>t.id===e.id),1),i[e.ressource]+=e.quantity})}static craft(e){for(let[t,r]of(console.log("Must craft this: ",e),Object.entries(a[e].ingredients)))i[t]-=r;i[e]+=1}}const c=e=>{console.log("Clicked on button with action: ",e.target?.dataset.action,e.target?.dataset.ressource);let t=e.target?.dataset.action;if(t){let r=l[t];"function"==typeof r&&r.call(l,e.target?.dataset.ressource)}};document.querySelectorAll("button").forEach(e=>{e.addEventListener("click",c)});
//# sourceMappingURL=wheat-simulator.489e7f4a.js.map
